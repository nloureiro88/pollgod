<div class="sidebar">

  <% Category.all.each do |cat| %>

    <div class="filter-col-desktop col-6 col-sm-4 col-md-3">

      <% cat_filter = Filter.find_by(user_id: current_user.id, category_id: cat.id) %>
      <% status_active = cat_filter.nil? || (!cat_filter.nil? && cat_filter.active) %>

      <%= link_to ftoggle_path(cat_id: cat.id, origin_action: action_name) do %>
        <% if status_active %>
          <div class="category cat-active" style="border-color: <%= cat.color %>" data-category="<%= cat.id %>">
            <%= image_tag("category_color/#{cat.icon}", size: "24x24",  title: "#{cat.name}", data: { toggle: "tooltip" },class: "svg-icon", alt: "#{cat.name} selected") %>
          </div>
        <% else %>
          <div class="category cat-inactive" data-category="<%= cat.id %>">
            <%= image_tag("category_lgrey/#{cat.icon}", size: "24x24", title: "#{cat.name}", data: { toggle: "tooltip" }, class: "svg-icon", alt: "#{cat.name} not selected") %>
          </div>
        <% end %>
      <% end %>

    </div>

  <% end %>

</div>
